<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Write your own tests and benchmarks that look and behave like built-in tests!"><title>libtest_mimic - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="libtest_mimic" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../libtest_mimic/index.html">libtest_<wbr>mimic</a><span class="version">0.8.1</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#usage" title="Usage">Usage</a></li><li><a href="#known-limitations-and-differences-to-the-official-test-harness" title="Known limitations and differences to the official test harness">Known limitations and differences to the official test harness</a></li></ul><h3><a href="#structs">Crate Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>libtest_mimic</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/libtest_mimic/lib.rs.html#1-590">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Write your own tests and benchmarks that look and behave like built-in tests!</p>
<p>This is a simple and small test harness that mimics the original <code>libtest</code>
(used by <code>cargo test</code>/<code>rustc --test</code>). That means: all output looks pretty
much like <code>cargo test</code> and most CLI arguments are understood and used. With
that plumbing work out of the way, your test runner can focus on the actual
testing.</p>
<p>For a small real world example, see <a href="https://github.com/LukasKalbertodt/libtest-mimic/blob/master/examples/tidy.rs"><code>examples/tidy.rs</code></a>.</p>
<h2 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h2>
<p>To use this, you most likely want to add a manual <code>[[test]]</code> section to
<code>Cargo.toml</code> and set <code>harness = false</code>. For example:</p>
<div class="example-wrap"><pre class="language-toml"><code>[[test]]
name = &quot;mytest&quot;
path = &quot;tests/mytest.rs&quot;
harness = false</code></pre></div>
<p>And in <code>tests/mytest.rs</code> you would call <a href="fn.run.html" title="fn libtest_mimic::run"><code>run</code></a> in the <code>main</code> function:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>libtest_mimic::{Arguments, Trial};


<span class="comment">// Parse command line arguments
</span><span class="kw">let </span>args = Arguments::from_args();

<span class="comment">// Create a list of tests and/or benchmarks (in this case: two dummy tests).
</span><span class="kw">let </span>tests = <span class="macro">vec!</span>[
    Trial::test(<span class="string">"succeeding_test"</span>, <span class="kw">move </span>|| <span class="prelude-val">Ok</span>(())),
    Trial::test(<span class="string">"failing_test"</span>, <span class="kw">move </span>|| <span class="prelude-val">Err</span>(<span class="string">"Woops"</span>.into())),
];

<span class="comment">// Run all tests and exit the application appropriatly.
</span>libtest_mimic::run(<span class="kw-2">&amp;</span>args, tests).exit();</code></pre></div>
<p>Instead of returning <code>Ok</code> or <code>Err</code> directly, you want to actually perform
your tests, of course. See <a href="struct.Trial.html#method.test" title="associated function libtest_mimic::Trial::test"><code>Trial::test</code></a> for more information on how to
define a test. You can of course list all your tests manually. But in many
cases it is useful to generate one test per file in a directory, for
example.</p>
<p>You can then run <code>cargo test --test mytest</code> to run it. To see the CLI
arguments supported by this crate, run <code>cargo test --test mytest -- -h</code>.</p>
<h2 id="known-limitations-and-differences-to-the-official-test-harness"><a class="doc-anchor" href="#known-limitations-and-differences-to-the-official-test-harness">§</a>Known limitations and differences to the official test harness</h2>
<p><code>libtest-mimic</code> works on a best-effort basis: it tries to be as close to
<code>libtest</code> as possible, but there are differences for a variety of reasons.
For example, some rarely used features might not be implemented, some
features are extremely difficult to implement, and removing minor,
unimportant differences is just not worth the hassle.</p>
<p>Some of the notable differences:</p>
<ul>
<li>Output capture and <code>--nocapture</code>: simply not supported. The official
<code>libtest</code> uses internal <code>std</code> functions to temporarily redirect output.
<code>libtest-mimic</code> cannot use those. See <a href="https://github.com/LukasKalbertodt/libtest-mimic/issues/9">this issue</a> for more
information.</li>
<li><code>--format=junit</code></li>
<li>Also see <a href="https://github.com/LukasKalbertodt/libtest-mimic/issues/13">#13</a></li>
</ul>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Arguments.html" title="struct libtest_mimic::Arguments">Arguments</a></dt><dd>Command line arguments.</dd><dt><a class="struct" href="struct.Conclusion.html" title="struct libtest_mimic::Conclusion">Conclusion</a></dt><dd>Contains information about the entire test run. Is returned by<a href="fn.run.html" title="fn libtest_mimic::run"><code>run</code></a>.</dd><dt><a class="struct" href="struct.Failed.html" title="struct libtest_mimic::Failed">Failed</a></dt><dd>Indicates that a test/benchmark has failed. Optionally carries a message.</dd><dt><a class="struct" href="struct.Measurement.html" title="struct libtest_mimic::Measurement">Measurement</a></dt><dd>Output of a benchmark.</dd><dt><a class="struct" href="struct.Trial.html" title="struct libtest_mimic::Trial">Trial</a></dt><dd>A single test or benchmark.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.ColorSetting.html" title="enum libtest_mimic::ColorSetting">Color<wbr>Setting</a></dt><dd>Possible values for the <code>--color</code> option.</dd><dt><a class="enum" href="enum.FormatSetting.html" title="enum libtest_mimic::FormatSetting">Format<wbr>Setting</a></dt><dd>Possible values for the <code>--format</code> option.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.run.html" title="fn libtest_mimic::run">run</a></dt><dd>Runs all given trials (tests &amp; benchmarks).</dd></dl></section></div></main></body></html>